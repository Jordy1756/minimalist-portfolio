---
import type { Basics } from "@entities/basics";
import EmailIcon from "@icons/EmailIcon.astro";
import GithubIcon from "@icons/GithubIcon.astro";
import LinkedInIcon from "@icons/LinkedInIcon.astro";
import ResumeIcon from "@icons/ResumeIcon.astro";
import WorldIcon from "@icons/WorldIcon.astro";
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import { Image } from "astro:assets";

interface Props {
	basics: Basics;
}

const { basics } = Astro.props;
const { name, label, email, location, avatar, profiles, resume } = basics;

const SOCIAL_ICONS = {
	GitHub: GithubIcon,
	LinkedIn: LinkedInIcon
};

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<header
	class="flex flex-col-reverse items-center justify-center gap-4 md:flex-row md:justify-between"
>
	<section
		class="flex flex-1 flex-col items-center gap-4 text-center md:items-start md:text-left"
	>
		<div class="flex flex-col gap-2">
			<h1 class="text-3xl font-extrabold text-neutral-950">{name}</h1>
			<h2 class="text-lg font-semibold text-neutral-800">{label}</h2>
			<address class="flex items-center justify-center gap-2 md:justify-start">
				<WorldIcon width={16} height={16} class="text-neutral-700" />
				<p class="text-sm font-normal not-italic">
					{`${location.city}, ${location.region}`}
				</p>
			</address>
		</div>
		<ul class="flex items-center justify-center gap-2 md:justify-start">
			<li class="rounded-sm border border-neutral-200 p-1">
				<a
					href={`mailto:${email}`}
					target="_blank"
					rel="noopener noreferrer"
					title={t("hero.email.aria", name, email)}
					aria-label={t("hero.email.aria", name, email)}
				>
					<EmailIcon
						width={20}
						height={20}
						class="text-neutral-700 transition-colors hover:text-neutral-900"
					/>
				</a>
			</li>
			{
				profiles.map(({ network, url }) => {
					const Icon = SOCIAL_ICONS[network as keyof typeof SOCIAL_ICONS];
					return (
						<li class="rounded-sm border border-neutral-200 p-1">
							<a
								href={url}
								target="_blank"
								rel="noopener noreferrer"
								title={t("hero.profile.aria", name, network)}
								aria-label={t("hero.profile.aria", name, network)}
							>
								<Icon
									width={20}
									height={20}
									class="text-neutral-700 transition-colors hover:text-neutral-900"
								/>
							</a>
						</li>
					);
				})
			}
			<li class="rounded-sm border border-neutral-200 p-1">
				<a
					href={resume}
					target="_blank"
					rel="noopener noreferrer"
					title={t("hero.resume.aria", name)}
					aria-label={t("hero.resume.aria", name)}
				>
					<ResumeIcon
						width={20}
						height={20}
						class="text-neutral-700 transition-colors hover:text-neutral-900"
					/>
				</a>
			</li>
		</ul>
	</section>
	<figure class="flex h-32 max-h-32 w-32 max-w-32">
		<Image
			src={avatar.src}
			alt={avatar.alt}
			class="aspect-square object-contain"
			width={128}
			height={128}
		/>
	</figure>
</header>
