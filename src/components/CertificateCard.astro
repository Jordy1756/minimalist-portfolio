---
import type { Certificate } from "@entities/certificate.entity";
import { getCurrentLocale } from "@i18n/index";
import ExternalIcon from "@icons/ExternalIcon.astro";

type Props = {
	certificate: Certificate;
};

const { certificate } = Astro.props;
const { name, date, issuer, url } = certificate;

const locale = getCurrentLocale();
const month = new Date(date).toLocaleDateString(locale === "es" ? "es-ES" : "en-US", {
	month: "short"
});
---

<article class="relative flex flex-col gap-1 pl-3">
	<span class="absolute top-1.5 right-[calc(100%+12px)] h-2 w-2 rounded-full bg-neutral-200"
	></span>
	<header class="flex items-start justify-between gap-2">
		<div class="flex items-baseline gap-2">
			<time class="text-xs text-neutral-400 uppercase" datetime={date + ""}>{month}</time>
			<h3 class="text-base font-medium">{name}</h3>
		</div>
		{
			url && (
				<a href={url} target="_blank" rel="noopener noreferrer" class="text-sm underline">
					<ExternalIcon width={16} height={16} color="var(--neutral-800)" />
				</a>
			)
		}
	</header>
	<main class="flex items-center justify-between gap-2">
		<p class="text-sm text-neutral-500">{issuer}</p>
	</main>
</article>
