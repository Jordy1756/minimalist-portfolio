---
import Layout from "@layouts/Layout.astro";
import Hero from "@sections/Hero.astro";
import About from "@sections/About.astro";
import Experience from "@sections/Experience.astro";
import Projects from "@sections/Projects.astro";
import Education from "@sections/Education.astro";
import Certificates from "@sections/Certificates.astro";
import Skills from "@sections/Skills.astro";

export const getStaticPaths = async () => [
	{ params: { locale: "es" } },
	{ params: { locale: "en" } }
];

const locale = Astro.params.locale || "es";

const supportedLocales = ["es", "en"];
const currentLocale = supportedLocales.includes(locale) ? locale : "es";

const resume = await import(`../../data/cv/${currentLocale}.json`);

const { basics, experience, education, projects, certificates, skills } = resume;
---

<Layout title={`Portafolio de ${basics.name} - ${basics.label}`} locale={currentLocale}>
	<Hero basics={basics} />
	<About about={basics} />
	<Experience experience={experience} />
	<Projects projects={projects} />
	<Education education={education} />
	<Certificates certificates={certificates} />
	<Skills skills={skills} />
</Layout>
