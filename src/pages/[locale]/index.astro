---
import type { Locale } from "@definitions/i18n";
import Layout from "@layouts/Layout.astro";
import Hero from "@sections/Hero.astro";
import About from "@sections/About.astro";
import Experience from "@sections/Experience.astro";
import Projects from "@sections/Projects.astro";
import Education from "@sections/Education.astro";
import Certificates from "@sections/Certificates.astro";
import Skills from "@sections/Skills.astro";
import { getCurrentLocale, getTranslations, setLocale } from "@i18n/index.ts";

export const getStaticPaths = async () => [
	{ params: { locale: "es" } },
	{ params: { locale: "en" } }
];

setLocale(Astro.params.locale as Locale);

const currentLocale = getCurrentLocale();
const resume = await import(`../../data/cv/${currentLocale}.json`);
const { basics, experience, education, projects, certificates, skills } = resume;

const t = getTranslations();

const { home } = t.pages;
const { sections } = home;
---

<Layout title={`${home.title} - ${basics.label}`} locale={currentLocale} basics={basics}>
	<Hero basics={basics} />
	<About title={sections.aboutMe.title} about={basics} />
	<Experience title={sections.experience.title} experience={experience} />
	<Projects title={sections.projects.title} projects={projects} />
	<Education title={sections.education.title} education={education} />
	<Certificates title={sections.certificates.title} certificates={certificates} />
	<Skills title={sections.skills.title} skills={skills} />
</Layout>
